<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>系统设计专题 {ignore=true} | Lancezhange Vuepress Book</title>
    <meta name="description" content="Learner">
    <meta name="generator" content="VuePress 1.3.1">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/2.10.0/github-markdown.min.css">
  <link rel="stylesheet" href="/grocery_store/css/index.css">
    
    <link rel="preload" href="/grocery_store/assets/css/0.styles.892fb305.css" as="style"><link rel="preload" href="/grocery_store/assets/js/app.47d3b9e2.js" as="script"><link rel="preload" href="/grocery_store/assets/js/3.e15ba04f.js" as="script"><link rel="preload" href="/grocery_store/assets/js/70.487b0cd7.js" as="script"><link rel="prefetch" href="/grocery_store/assets/js/10.666a773f.js"><link rel="prefetch" href="/grocery_store/assets/js/100.2b4d646e.js"><link rel="prefetch" href="/grocery_store/assets/js/101.de9d1a6c.js"><link rel="prefetch" href="/grocery_store/assets/js/102.85a31c0d.js"><link rel="prefetch" href="/grocery_store/assets/js/103.4d080f12.js"><link rel="prefetch" href="/grocery_store/assets/js/104.54bedf13.js"><link rel="prefetch" href="/grocery_store/assets/js/105.60e9e099.js"><link rel="prefetch" href="/grocery_store/assets/js/106.46204467.js"><link rel="prefetch" href="/grocery_store/assets/js/107.bd63530e.js"><link rel="prefetch" href="/grocery_store/assets/js/108.85a7fb4a.js"><link rel="prefetch" href="/grocery_store/assets/js/109.b3cce710.js"><link rel="prefetch" href="/grocery_store/assets/js/11.a878cb18.js"><link rel="prefetch" href="/grocery_store/assets/js/110.b71213ca.js"><link rel="prefetch" href="/grocery_store/assets/js/111.88e3c009.js"><link rel="prefetch" href="/grocery_store/assets/js/112.672c0e9c.js"><link rel="prefetch" href="/grocery_store/assets/js/113.9f626878.js"><link rel="prefetch" href="/grocery_store/assets/js/114.e971f677.js"><link rel="prefetch" href="/grocery_store/assets/js/115.32931221.js"><link rel="prefetch" href="/grocery_store/assets/js/116.7d7bb8e9.js"><link rel="prefetch" href="/grocery_store/assets/js/117.d1d64952.js"><link rel="prefetch" href="/grocery_store/assets/js/118.371e7dde.js"><link rel="prefetch" href="/grocery_store/assets/js/119.7187d3ac.js"><link rel="prefetch" href="/grocery_store/assets/js/12.7971495d.js"><link rel="prefetch" href="/grocery_store/assets/js/120.3f89d6c5.js"><link rel="prefetch" href="/grocery_store/assets/js/121.78a87a30.js"><link rel="prefetch" href="/grocery_store/assets/js/122.d2df534e.js"><link rel="prefetch" href="/grocery_store/assets/js/123.c95b11ab.js"><link rel="prefetch" href="/grocery_store/assets/js/124.0fb28081.js"><link rel="prefetch" href="/grocery_store/assets/js/125.ff76a45e.js"><link rel="prefetch" href="/grocery_store/assets/js/126.9328300b.js"><link rel="prefetch" href="/grocery_store/assets/js/127.a6a2f599.js"><link rel="prefetch" href="/grocery_store/assets/js/128.4f59b6b2.js"><link rel="prefetch" href="/grocery_store/assets/js/129.7ad23ac2.js"><link rel="prefetch" href="/grocery_store/assets/js/13.c108b008.js"><link rel="prefetch" href="/grocery_store/assets/js/130.ff450918.js"><link rel="prefetch" href="/grocery_store/assets/js/131.0c23ac4e.js"><link rel="prefetch" href="/grocery_store/assets/js/132.39985100.js"><link rel="prefetch" href="/grocery_store/assets/js/133.97d11e72.js"><link rel="prefetch" href="/grocery_store/assets/js/134.f7f5be44.js"><link rel="prefetch" href="/grocery_store/assets/js/135.8d032916.js"><link rel="prefetch" href="/grocery_store/assets/js/136.5f8428a0.js"><link rel="prefetch" href="/grocery_store/assets/js/137.68ec6b04.js"><link rel="prefetch" href="/grocery_store/assets/js/138.594feaf1.js"><link rel="prefetch" href="/grocery_store/assets/js/139.712936f1.js"><link rel="prefetch" href="/grocery_store/assets/js/14.c8cecf72.js"><link rel="prefetch" href="/grocery_store/assets/js/140.e462485b.js"><link rel="prefetch" href="/grocery_store/assets/js/141.f7e3b64c.js"><link rel="prefetch" href="/grocery_store/assets/js/142.a1f358ef.js"><link rel="prefetch" href="/grocery_store/assets/js/143.7bd36db2.js"><link rel="prefetch" href="/grocery_store/assets/js/144.cfa08961.js"><link rel="prefetch" href="/grocery_store/assets/js/145.8d25c175.js"><link rel="prefetch" href="/grocery_store/assets/js/146.8205975e.js"><link rel="prefetch" href="/grocery_store/assets/js/147.cf326d2a.js"><link rel="prefetch" href="/grocery_store/assets/js/148.0d0d0e35.js"><link rel="prefetch" href="/grocery_store/assets/js/149.f913ee12.js"><link rel="prefetch" href="/grocery_store/assets/js/15.b2a89722.js"><link rel="prefetch" href="/grocery_store/assets/js/150.b5d4816c.js"><link rel="prefetch" href="/grocery_store/assets/js/151.3e654989.js"><link rel="prefetch" href="/grocery_store/assets/js/152.0ed89a9b.js"><link rel="prefetch" href="/grocery_store/assets/js/153.8e227ca1.js"><link rel="prefetch" href="/grocery_store/assets/js/154.a2831255.js"><link rel="prefetch" href="/grocery_store/assets/js/155.10ccf9ac.js"><link rel="prefetch" href="/grocery_store/assets/js/156.380d2724.js"><link rel="prefetch" href="/grocery_store/assets/js/157.c81733eb.js"><link rel="prefetch" href="/grocery_store/assets/js/158.cbfc3908.js"><link rel="prefetch" href="/grocery_store/assets/js/159.a6d3ae98.js"><link rel="prefetch" href="/grocery_store/assets/js/16.fd35c607.js"><link rel="prefetch" href="/grocery_store/assets/js/160.7255e3b5.js"><link rel="prefetch" href="/grocery_store/assets/js/161.904010dd.js"><link rel="prefetch" href="/grocery_store/assets/js/162.4dec98b6.js"><link rel="prefetch" href="/grocery_store/assets/js/163.37a5ff7f.js"><link rel="prefetch" href="/grocery_store/assets/js/164.88a4ed0a.js"><link rel="prefetch" href="/grocery_store/assets/js/165.e5de4c12.js"><link rel="prefetch" href="/grocery_store/assets/js/166.acb3ac67.js"><link rel="prefetch" href="/grocery_store/assets/js/167.922fe947.js"><link rel="prefetch" href="/grocery_store/assets/js/168.9b5decdc.js"><link rel="prefetch" href="/grocery_store/assets/js/169.774f7b4f.js"><link rel="prefetch" href="/grocery_store/assets/js/17.94989432.js"><link rel="prefetch" href="/grocery_store/assets/js/170.74cc7593.js"><link rel="prefetch" href="/grocery_store/assets/js/171.f22f02e1.js"><link rel="prefetch" href="/grocery_store/assets/js/172.795a7607.js"><link rel="prefetch" href="/grocery_store/assets/js/173.6a9852b2.js"><link rel="prefetch" href="/grocery_store/assets/js/174.24096d24.js"><link rel="prefetch" href="/grocery_store/assets/js/175.e1f80709.js"><link rel="prefetch" href="/grocery_store/assets/js/176.89e20247.js"><link rel="prefetch" href="/grocery_store/assets/js/177.90f78411.js"><link rel="prefetch" href="/grocery_store/assets/js/178.7cad688f.js"><link rel="prefetch" href="/grocery_store/assets/js/179.869c8720.js"><link rel="prefetch" href="/grocery_store/assets/js/18.dd69d970.js"><link rel="prefetch" href="/grocery_store/assets/js/180.c18e296f.js"><link rel="prefetch" href="/grocery_store/assets/js/19.e3521f6f.js"><link rel="prefetch" href="/grocery_store/assets/js/2.6f311729.js"><link rel="prefetch" href="/grocery_store/assets/js/20.cdd37c03.js"><link rel="prefetch" href="/grocery_store/assets/js/21.74481991.js"><link rel="prefetch" href="/grocery_store/assets/js/22.13aba632.js"><link rel="prefetch" href="/grocery_store/assets/js/23.faf985dd.js"><link rel="prefetch" href="/grocery_store/assets/js/24.7790407e.js"><link rel="prefetch" href="/grocery_store/assets/js/25.cc831358.js"><link rel="prefetch" href="/grocery_store/assets/js/26.5b918371.js"><link rel="prefetch" href="/grocery_store/assets/js/27.1fb985ed.js"><link rel="prefetch" href="/grocery_store/assets/js/28.4f194089.js"><link rel="prefetch" href="/grocery_store/assets/js/29.0e71c38a.js"><link rel="prefetch" href="/grocery_store/assets/js/30.9f05173d.js"><link rel="prefetch" href="/grocery_store/assets/js/31.5e341171.js"><link rel="prefetch" href="/grocery_store/assets/js/32.a550c1a0.js"><link rel="prefetch" href="/grocery_store/assets/js/33.8a828405.js"><link rel="prefetch" href="/grocery_store/assets/js/34.f7e62a92.js"><link rel="prefetch" href="/grocery_store/assets/js/35.711fbf92.js"><link rel="prefetch" href="/grocery_store/assets/js/36.b9fe8ec6.js"><link rel="prefetch" href="/grocery_store/assets/js/37.a924be53.js"><link rel="prefetch" href="/grocery_store/assets/js/38.e8f0d4cf.js"><link rel="prefetch" href="/grocery_store/assets/js/39.4cc4d0f7.js"><link rel="prefetch" href="/grocery_store/assets/js/4.2b8a6a17.js"><link rel="prefetch" href="/grocery_store/assets/js/40.39fd33ca.js"><link rel="prefetch" href="/grocery_store/assets/js/41.aa2d5c38.js"><link rel="prefetch" href="/grocery_store/assets/js/42.2e653320.js"><link rel="prefetch" href="/grocery_store/assets/js/43.60b064bc.js"><link rel="prefetch" href="/grocery_store/assets/js/44.b9efc4b4.js"><link rel="prefetch" href="/grocery_store/assets/js/45.9345a9b8.js"><link rel="prefetch" href="/grocery_store/assets/js/46.58671855.js"><link rel="prefetch" href="/grocery_store/assets/js/47.e8dced2f.js"><link rel="prefetch" href="/grocery_store/assets/js/48.623a8708.js"><link rel="prefetch" href="/grocery_store/assets/js/49.3da43528.js"><link rel="prefetch" href="/grocery_store/assets/js/5.41bb00f7.js"><link rel="prefetch" href="/grocery_store/assets/js/50.e8b509c0.js"><link rel="prefetch" href="/grocery_store/assets/js/51.57dea248.js"><link rel="prefetch" href="/grocery_store/assets/js/52.2a653b34.js"><link rel="prefetch" href="/grocery_store/assets/js/53.7e9a38b7.js"><link rel="prefetch" href="/grocery_store/assets/js/54.a6d6a228.js"><link rel="prefetch" href="/grocery_store/assets/js/55.6589895a.js"><link rel="prefetch" href="/grocery_store/assets/js/56.f2fcde50.js"><link rel="prefetch" href="/grocery_store/assets/js/57.8fbc4361.js"><link rel="prefetch" href="/grocery_store/assets/js/58.e5afed15.js"><link rel="prefetch" href="/grocery_store/assets/js/59.2c8ca963.js"><link rel="prefetch" href="/grocery_store/assets/js/6.31d3db0c.js"><link rel="prefetch" href="/grocery_store/assets/js/60.79a70c57.js"><link rel="prefetch" href="/grocery_store/assets/js/61.9fef88bd.js"><link rel="prefetch" href="/grocery_store/assets/js/62.e375e524.js"><link rel="prefetch" href="/grocery_store/assets/js/63.5952f2d6.js"><link rel="prefetch" href="/grocery_store/assets/js/64.2695a163.js"><link rel="prefetch" href="/grocery_store/assets/js/65.96a95c08.js"><link rel="prefetch" href="/grocery_store/assets/js/66.82c501b5.js"><link rel="prefetch" href="/grocery_store/assets/js/67.c3dfe33d.js"><link rel="prefetch" href="/grocery_store/assets/js/68.8d61e8ca.js"><link rel="prefetch" href="/grocery_store/assets/js/69.ffb2c059.js"><link rel="prefetch" href="/grocery_store/assets/js/7.390fea20.js"><link rel="prefetch" href="/grocery_store/assets/js/71.698c9666.js"><link rel="prefetch" href="/grocery_store/assets/js/72.baf6aad0.js"><link rel="prefetch" href="/grocery_store/assets/js/73.a28c801a.js"><link rel="prefetch" href="/grocery_store/assets/js/74.fb3ba6d3.js"><link rel="prefetch" href="/grocery_store/assets/js/75.acb4412a.js"><link rel="prefetch" href="/grocery_store/assets/js/76.3bd634b6.js"><link rel="prefetch" href="/grocery_store/assets/js/77.db356fda.js"><link rel="prefetch" href="/grocery_store/assets/js/78.c7912e34.js"><link rel="prefetch" href="/grocery_store/assets/js/79.2144dc16.js"><link rel="prefetch" href="/grocery_store/assets/js/8.aee987bd.js"><link rel="prefetch" href="/grocery_store/assets/js/80.d6fbf3d8.js"><link rel="prefetch" href="/grocery_store/assets/js/81.e21a47d6.js"><link rel="prefetch" href="/grocery_store/assets/js/82.7f4636b3.js"><link rel="prefetch" href="/grocery_store/assets/js/83.440942f4.js"><link rel="prefetch" href="/grocery_store/assets/js/84.f0d9a8fe.js"><link rel="prefetch" href="/grocery_store/assets/js/85.39c6b930.js"><link rel="prefetch" href="/grocery_store/assets/js/86.75218340.js"><link rel="prefetch" href="/grocery_store/assets/js/87.b103ab9e.js"><link rel="prefetch" href="/grocery_store/assets/js/88.ac661b1d.js"><link rel="prefetch" href="/grocery_store/assets/js/89.92e470b3.js"><link rel="prefetch" href="/grocery_store/assets/js/9.ad4b2757.js"><link rel="prefetch" href="/grocery_store/assets/js/90.b2e04d90.js"><link rel="prefetch" href="/grocery_store/assets/js/91.8a00aaec.js"><link rel="prefetch" href="/grocery_store/assets/js/92.f7d023f2.js"><link rel="prefetch" href="/grocery_store/assets/js/93.9128c36a.js"><link rel="prefetch" href="/grocery_store/assets/js/94.6280de17.js"><link rel="prefetch" href="/grocery_store/assets/js/95.ea00692f.js"><link rel="prefetch" href="/grocery_store/assets/js/96.a140f30e.js"><link rel="prefetch" href="/grocery_store/assets/js/97.ea5254e3.js"><link rel="prefetch" href="/grocery_store/assets/js/98.9e168926.js"><link rel="prefetch" href="/grocery_store/assets/js/99.c5f861f8.js">
    <link rel="stylesheet" href="/grocery_store/assets/css/0.styles.892fb305.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/grocery_store/" class="home-link router-link-active"><!----> <span class="site-name">Lancezhange Vuepress Book</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/grocery_store/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/grocery_store/SUMMARY/" class="nav-link">
  Contents
</a></div><div class="nav-item"><a href="http://www.lancezhange.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Blog
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/grocery_store/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/grocery_store/SUMMARY/" class="nav-link">
  Contents
</a></div><div class="nav-item"><a href="http://www.lancezhange.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Blog
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/grocery_store/section2/" class="sidebar-link">计算机基础</a></li><li><a href="/grocery_store/section2/osAndCompiler.html" class="sidebar-link">1. 操作系统和编译原理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/grocery_store/section2/osAndCompiler.html#_1-1-编译器的分支预测" class="sidebar-link">1.1. 编译器的分支预测</a></li><li class="sidebar-sub-header"><a href="/grocery_store/section2/osAndCompiler.html#_1-2-非规格化浮点数-denormal-number" class="sidebar-link">1.2. 非规格化浮点数(Denormal Number)</a></li><li class="sidebar-sub-header"><a href="/grocery_store/section2/osAndCompiler.html#_1-3-页面调度算法" class="sidebar-link">1.3. 页面调度算法</a></li><li class="sidebar-sub-header"><a href="/grocery_store/section2/osAndCompiler.html#_1-4-linux-内存管理" class="sidebar-link">1.4. Linux 内存管理</a></li><li class="sidebar-sub-header"><a href="/grocery_store/section2/osAndCompiler.html#_1-5-虚拟内存地址与物理内存地址" class="sidebar-link">1.5. 虚拟内存地址与物理内存地址</a></li></ul></li><li><a href="/grocery_store/section2/communicationAndProtocol.html" class="sidebar-link">通信协议</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/grocery_store/section2/re.html" class="sidebar-link">正则表达式</a></li><li><a href="/grocery_store/section2/database.html" class="sidebar-link">数据库</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/grocery_store/section2/designMode.html" class="sidebar-link">设计模式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/grocery_store/section2/designMode.html#常用设计模式" class="sidebar-link">常用设计模式</a></li><li class="sidebar-sub-header"><a href="/grocery_store/section2/designMode.html#面向对象" class="sidebar-link">面向对象</a></li><li class="sidebar-sub-header"><a href="/grocery_store/section2/designMode.html#资料" class="sidebar-link">资料</a></li></ul></li><li><a href="/grocery_store/section2/parallell.html" class="sidebar-link">并发并行</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/grocery_store/section2/parallell.html#多线程和多进程编程" class="sidebar-link">多线程和多进程编程</a></li></ul></li><li><a href="/grocery_store/section2/system.html" class="active sidebar-link">系统设计专题 {ignore=true}</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/grocery_store/section2/system.html#分布式-id" class="sidebar-link">分布式 id</a></li><li class="sidebar-sub-header"><a href="/grocery_store/section2/system.html#短链" class="sidebar-link">短链</a></li><li class="sidebar-sub-header"><a href="/grocery_store/section2/system.html#信息流" class="sidebar-link">信息流</a></li><li class="sidebar-sub-header"><a href="/grocery_store/section2/system.html#定时任务调度" class="sidebar-link">定时任务调度</a></li><li class="sidebar-sub-header"><a href="/grocery_store/section2/system.html#api-限速" class="sidebar-link">API 限速</a></li><li class="sidebar-sub-header"><a href="/grocery_store/section2/system.html#kv-存储引擎" class="sidebar-link">KV 存储引擎</a></li><li class="sidebar-sub-header"><a href="/grocery_store/section2/system.html#异步框架" class="sidebar-link">异步框架</a></li><li class="sidebar-sub-header"><a href="/grocery_store/section2/system.html#参考资料" class="sidebar-link">参考资料</a></li></ul></li><li><a href="/grocery_store/section2/distributedSystem.html" class="sidebar-link">分布式系统</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/grocery_store/section2/distributedSystem.html#" class="sidebar-link"></a></li></ul></li><li><a href="/grocery_store/section2/hpc.html" class="sidebar-link">高性能计算</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/grocery_store/section2/hpc.html#mpi" class="sidebar-link">MPI</a></li><li class="sidebar-sub-header"><a href="/grocery_store/section2/hpc.html#cuda" class="sidebar-link">CUDA</a></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="系统设计专题-ignore-true"><a href="#系统设计专题-ignore-true" class="header-anchor">#</a> 系统设计专题 {ignore=true}</h1> <p>[TOC]</p> <h2 id="分布式-id"><a href="#分布式-id" class="header-anchor">#</a> 分布式 id</h2> <p>如何设计一个分布式 ID 生成器(Distributed ID Generator)？</p> <p><strong>需求</strong></p> <ol><li>全局唯一</li> <li>尽可能短以节省内存</li> <li>按时间粗略有序</li></ol> <h3 id="uuid"><a href="#uuid" class="header-anchor">#</a> UUID</h3> <p>4 个字节表示的 Unix timestamp,
3 个字节表示的机器的 ID
2 个字节表示的进程 ID
3 个字节表示的计数器</p> <p>总共 12 个字节，太长了！</p> <h3 id="多台-mysql-服务器"><a href="#多台-mysql-服务器" class="header-anchor">#</a> 多台 mysql 服务器</h3> <p>假设用 8 台 MySQL 服务器协同工作，第一台 MySQL 初始值是 1，每次自增 8，第二台 MySQL 初始值是 2，每次自增 8，依次类推。前面用一个 round-robin load balancer 挡着，每来一个请求，由 round-robin balancer 随机地将请求发给 8 台 MySQL 中的任意一个，然后返回一个 ID。</p> <h2 id="短链"><a href="#短链" class="header-anchor">#</a> 短链</h2> <p>当前互联网上的<a href="0http://www.worldwidewebsize.com">网页总数大概是 45 亿</a>，45 亿超过了 2^{32}=4294967296，但远远小于 64 位整数的上限值，那么用一个 64 位整数足够了。</p> <h3 id="_301-还是-302-重定向"><a href="#_301-还是-302-重定向" class="header-anchor">#</a> 301 还是 302 重定向</h3> <p>301 是永久重定向，302 是临时重定向</p> <h2 id="信息流"><a href="#信息流" class="header-anchor">#</a> 信息流</h2> <h2 id="定时任务调度"><a href="#定时任务调度" class="header-anchor">#</a> 定时任务调度</h2> <h2 id="api-限速"><a href="#api-限速" class="header-anchor">#</a> API 限速</h2> <h2 id="kv-存储引擎"><a href="#kv-存储引擎" class="header-anchor">#</a> KV 存储引擎</h2> <p>目前开源的 KV 存储引擎中，RocksDB 是流行的一个</p> <p>RocksDB 最初是从 LevelDB 进化而来的</p> <p>有一个反直觉的事情是，<strong>内存随机写甚至比硬盘的顺序读还要慢</strong>，磁盘随机写就更慢了</p> <h2 id="异步框架"><a href="#异步框架" class="header-anchor">#</a> 异步框架</h2> <h3 id="seastar"><a href="#seastar" class="header-anchor">#</a> SeaStar</h3> <p>现代硬件上的高性能 C++异步框架 - SeaStar</p> <p>说到 Seastar，不得不说 Scylla。Scylla 是 2015 年 9 月开源，由大神 KVM 之父 Avi Kivity 创建的 NoSQL 数据库，接口协议完全兼容 Cassandra，但性能号称快了 10 倍：每节点 1 millionIOPS。Scylla 完全基于 Seastar 库，由 C++改写的 Cassandra。</p> <p>所以 Scylla 的惊鸿面世也带来了大家对于 Seastar 的瞩目。实际上，Scylla 只是 Seastar 的一个应用，其他应用如 Pedis 也佐证了 Seastar 是整个应用性能提升的基石.</p> <h2 id="参考资料"><a href="#参考资料" class="header-anchor">#</a> 参考资料</h2> <p>关于分布式系统设计问题，参考<a href="/grocery_store/section2/distributedSystem.html">分布式系统</a></p> <p>关于 AI 系统设计问题，参考 <a href="/grocery_store/section6/ai-system.html">AI 系统设计</a></p> <ul><li><a href="https://legacy.gitbook.com/book/soulmachine/system-design/details" target="_blank" rel="noopener noreferrer">系统设计面试题精选<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/grocery_store/section2/parallell.html" class="prev">
        并发并行
      </a></span> <span class="next"><a href="/grocery_store/section2/distributedSystem.html">
        分布式系统
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/grocery_store/assets/js/app.47d3b9e2.js" defer></script><script src="/grocery_store/assets/js/3.e15ba04f.js" defer></script><script src="/grocery_store/assets/js/70.487b0cd7.js" defer></script>
  </body>
</html>
